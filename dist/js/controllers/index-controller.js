app.controller("IndexController",["$scope","$http","$window",function(o,r,e){baseUrl="http://187.111.10.182:8998/ideia/core/pessoa/11015472788",o.teste="vinicius",o.validacao_email=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,o.nomevalidacao_somente_letras_com_caracter_especial=/^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ'\s]+$/,o.validacao_somente_letras=/^[a-zA-Z ]{1,25}$/,o.validacao_somente_numeros=/^[0-9]*$/,o.validacao_telefone=/^[0-9]{8,9}$/,o.pessoa={codigo:"P101547278",cpf_cnpj:"",nome:"Vinícius Nunes",email:"exemplo@ideia.com.br",telefone:"980346645",residencial:"",cep:"22755150",rua:"",numero_casa:"",bairro:"",complemento:"",cidade:"",uf:""},o.reset=function(){angular.copy({},o.pessoa),o.formulario.$setPristine(),o.formulario.$setUntouched()},o.criarCliente=function(){console.log(o.formulario)},o.validaCampoCpfCnpj=function(a){return valor=a.pessoa.cpf_cnpj.replace(/\D/g,""),tam=valor.length,11!=tam&&14!=tam?(o.formulario.cpf_cnpj.$setValidity("cpf_cnpj",!1),!1):11==tam?this.validaCPF(valor)?(o.formulario.cpf_cnpj.$setValidity("cpf_cnpj",!0),a.pessoa.cpf_cnpj=this.maskCPF(valor),!0):(o.formulario.cpf_cnpj.$setValidity("cpf_cnpj",!1),!1):14==tam?this.validaCNPJ(valor)?(o.formulario.cpf_cnpj.$setValidity("cpf_cnpj",!0),a.pessoa.cpf_cnpj=this.maskCNPJ(valor),!0):(o.formulario.cpf_cnpj.$setValidity("cpf_cnpj",!1),!1):void 0},o.validaCPF=function(a){for(var o=a.substr(0,9),r=a.substr(9,2),e=0,i=0;i<9;i++)e+=o.charAt(i)*(10-i);if(0==e)return!1;if(9<(e=11-e%11)&&(e=0),r.charAt(0)!=e)return!1;e*=2;for(i=0;i<9;i++)e+=o.charAt(i)*(11-i);return 9<(e=11-e%11)&&(e=0),r.charAt(1)==e},o.validaCNPJ=function(a){var o=new Array,r=new Number,e=[6,5,4,3,2,9,8,7,6,5,4,3,2];for(i=0;i<12;i++)o[i]=a.charAt(i),r+=o[i]*e[i+1];for((x=r%11)<2?o[12]=0:o[12]=11-x,r=0,y=0;y<13;y++)r+=o[y]*e[y];return(x=r%11)<2?o[13]=0:o[13]=11-x,a.charAt(12)==o[12]&&a.charAt(13)==o[13]},o.maskCPF=function(a){return a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)},o.maskCNPJ=function(a){return a.substring(0,2)+"."+a.substring(2,5)+"."+a.substring(5,8)+"/"+a.substring(8,12)+"-"+a.substring(12,14)},o.consultaCep=function(a){if(cep=a.pessoa.cep,limparFormulario=function(){o.pessoa.rua="",o.pessoa.bairro="",o.pessoa.cidade="",o.pessoa.uf=""},""!=cep){/^[0-9]{8}$/.test(cep)?(o.pessoa.rua="...",o.pessoa.bairro="...",o.pessoa.cidade="...",o.pessoa.uf="...",r({method:"GET",url:"https://viacep.com.br/ws/"+cep+"/json/?callback="}).then(function(a){"erro"in a.data?(limparFormulario(),e.alert("Cep não encontrado.")):(o.pessoa.rua=a.data.logradouro,o.pessoa.bairro=a.data.bairro,o.pessoa.cidade=a.data.localidade,o.pessoa.uf=a.data.uf)})):(limparFormulario(),e.alert("Formato de CEP inválido"))}else limparFormulario()}}]);